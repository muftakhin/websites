<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM</title>
    <link rel="stylesheet" href="../../styles/style.css">
</head>

<body class="body">
    <header class="header">
        <a class="header__button"  href="../javascript.html">&uArr;</a>
        <h1 class="header__title">DOM</h1>
    </header>

    <main class="main">
        <p class="paragraph">DOM - это API для XML, применение которого было расширино на HTML</p>
        <section class="section">
            <h2 class="section__header">window</h2>

            <p class="paragraph">- внутреннее представление страницы в браузере</p>

            <p class="paragraph">
                &bull; Глобальный объект, занимается окном, внутри которого DOM-дерево<br>
                &bull; Т.к. объект <strong>window</strong> действует как глобальная среда, любые имена свойств или методов данного объекта разрешается указывать без указания перед ними слова window<br>
                &bull; Любые глобальные переменные, которые вы определяете, помещаются в пространство имён <strong>window</strong>, так что вы можете ссылаться на них следующим образом: <strong>window.имя_переменной</strong>
            </p>

            <div class="subsection">                    
                <h3 class="subsection__header">Свойства объекта window</h3>

                <p class="paragraph">
                    <strong>location</strong> - содержит URL-адрес страницы<br>
                    <strong>status</strong> - содержит строку отображающуюся в статусной строке<br>
                    <strong>onload</strong> - содержит функцию, вызываемую после полной загрузки страницы<br>
                    <strong>document</strong> - содержит объектную модель документа (DOM)
                </p>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">window.onload</h4>

                    <p class="paragraph">- выполнение кода после загрузки страницы</p>

                    <p class="paragraph">Присваивая свойству <strong>window.onload</strong> функции мы можем гарантировать, что код в теле функции не будет выполняться до тех пор, пока загрузув страницы не закончится и ибъектная модель документа не будет полностью сгенерирована</p>
                    <pre class="screen screen_pre">
window.onload = function() {
    ...
};</pre>
                    <p class="paragraph">Другой вариант:</p>
                    <pre class="screen screen_pre">
function name_1() {
    ...
}

window.onload = name_1;</pre>
                    <p class="paragraph">
                        &bull; Перед <strong>onload</strong> указываем <strong>window.</strong>, ибо существует масса других объектов, имеющих свойство <strong>onload</strong><br>
                        &bull; Если вместо <strong>window.onload = name_1;</strong> (присвоение значения функции свойству <strong>onload</strong>) указать <strong>window.onload = name_1();</strong>, то этим скажем, что хотим вызвать функцию <strong>name_1</strong>. А так мы просто связываем функцию <strong>name_1</strong> c <strong>window.onload</strong>
                    </p>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Методы объекта window</h3>

                <p class="paragraph">
                    <strong>alert</strong> - выводит соответствующее диалоговое окно<br>
                    <strong>prompt</strong> - получает информацию от пользователя<br>
                    <strong>open</strong> - открывает новое окно браузера<br>
                    <strong>close</strong> - закрывает окно<br>
                    <strong>setTimeout</strong> - вызывает обработчик по истечении заданного интервала времени<br>
                    <strong>setInterval</strong> - многократно вызывает обработчик через заданный интервал времени
                </p>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">document</h2>

            <p class="paragraph">
                &bull; Является свойством объекта <strong>window</strong>
                &bull; Глобальный объект<br>
                &bull; Корневой элемент дерева DOM
            </p>

            <div class="subsection">
                <h3 class="subsection__header">Основные свойства объекта document</h3>

                <p class="paragraph">
                    <strong>document.anchors</strong> - массив со всеми якорями документа<br>
                    <strong>document.images</strong> - массив-объект со всеми картинками докуента<br>
                    <strong>links</strong> - массив со всемы ссылками документа<br>
                    <strong>forms</strong> - массив со всеми формами документа
                </p>

                <pre class="screen screen_post">
&lt;img src="/images/image_1.png"&gt;
document.images[0].src = "/images/image_1.png";

&lt;a href="http://ovnacode.ru"&gt;Код Овна&lt;/a&gt;
document.links[0].href = "http://ovnacode.ru";</pre>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Свойства объекта document</h3>
                    
                <p class="paragraph">
                    <strong>domain</strong> - домен сервера, с которого загружается документ, например bestsite.com<br>
                    <strong>title</strong> - может использоваться для извлечения заголовка документа, для чего нужно указать document.title<br>
                    <strong>URL</strong> - URL-адрес документа
                </p>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Доступ к основным элементам</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">DOCTYPE</h4>

                    <pre class="screen screen_pre">
document.doctype</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">html</h4>

                    <pre class="screen screen_pre">
document.documentElement</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">head</h4>

                    <pre class="screen screen_pre">
document.head</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">body</h4>

                    <pre class="screen screen_pre">
document.body</pre>
                    <pre class="screen screen_post">
document.body.style.backgroundColor = "red";</pre>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Методы DOM</h2>

            <div class="subsection">
                <h3 class="subsection__header">Поиск элемента</h3>


                <div class="subsubsection">
                    <h4 class="subsubsection__header">getElementBy...(устарел)</h4>

                    <pre class="screen screen_pre">
let name_1 = document.getElementById("name_2");

let name_1 = document.getElementsByClassName("name_2");     // -&gt; псевдомассив (коллекцию) элементов

let name_1 = document.getElementsByTagName("name_2");       // -&gt; псевдомассив (коллекцию) элементов
name_1[i];                                                  // i - индекс элемента псевдомассива

    //-&gt; null если такой name_2 отсутствует</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.querySelector()</h4>

                    <p class="paragraph">
                        - возвращает первый найденный элемент DOM соответствующий селектору, кроме селекторов:<br>
                        <strong>:visited</strong><br>
                        <strong>:link</strong><br>
                        <strong>::before</strong><br>
                        <strong>::after</strong>
                    </p>
                    <pre class="screen screen_pre">
let name_1 = document.querySelector("css_selector");</pre>

                    <pre class="screen screen_pre">
    // Задавание значений свойств с использованием .querySelector


document.querySelector("css_selector").style.свойство = 'значение';</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.querySelectorAll()</h4>

                    <p class="paragraph">Возвращает все элементы DOM соответствующие селектору в виде массива</p>

                    <pre class="screen screen_pre">
let name_1 = document.querySelectorAll("css_selector");
    
let name_2 = name_1[i]   //  - доступ к i-1 элементу массива элементов name_1</pre>
                    <p class="p">
                        к name_1 применим метод массива <strong>forEach</strong>.
                    </p>
                    <pre class="screen screen_post">
    // Слайдер с использованием .querySelectorAll()


let btn_prev = document.querySelectorAll('.gallery__btn_prev');
let btn_next = document.querySelectorAll('.gallery__btn_next');

let images = document.querySelectorAll('.images__image');

let i = 0;

btn_prev.onclick = function() {
    images[i].style.display = 'none';
    i--;

    if(i &lt; 0) {
        i = images.length - 1;
    }

    images[i].style.display = 'block';
};
    
btn_next.onclick = function() {
    images[i].style.display = 'none';
    i++;

    if(i &gt; images.length) {
        i = 0;
    }

    images[i].style.display = 'block';
};</pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Содержимое элемента</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.innerHTML и .textContent</h4>

                    <p class="paragraph">
                        С помощью свойств <strong>.innerHTML</strong> и <strong>.textContent</strong> можем изменить содержимое элемента<br>
                        <strong>.innerHTML</strong> представляет всё содержимое элемента, включая вложенные элементы (всё в кавычках).<br>
                        <strong>.textContent</strong> - текстовое содержимое элемента.
                    </p>
                    <pre class="screen screen_pre">
let name_1 = document.querySelector("css_selector");

name_1.innerHTML = "Содержимое элемента";     // задать
name_1.textContent = "Содержимое элемента";   // содержимое

console.log(name_1.innerHTML);                // вывести
console.log(name_1.textContent);              // содержиммое</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.insertAdjacentHTML</h4>

                    <pre class="screen screen_pre">
name_1.insertAdjacentHTML("value", htmlCode);</pre>
                    <p class="p">
                        <strong>name_1</strong> - элемент-ориентир.<br>
                        <strong>htmlCode</strong> - вставляемый код HTML<br>
                        <strong>value</strong>:<br>
                        - <strong>befoebegin</strong> - перед<br>
                        - <strong>afterbegin</strong> - в начало<br>
                        - <strong>beforeend</strong> - в конец<br>
                        - <strong>afterend</strong> - после
                    </p>
                </div>

                <div class="subsubsection">               
                    <h3 class="subsubsection__header">.outerHTML</h3>

                    <p class="paragraph"><strong>.outerHTML</strong> возвращает элемент и всю разметку внутри него</p>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Значение атрибута</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.setAttribute() и .getAttribute()</h4>

                <p class="paragraph">- вызываются для создания и получения значения атрибута</p>

                <pre class="screen screen_pre">
let name_1 = document.querySelector("css_selector");

name_1.setAttribute("name_2", "value_1");
name_1.getAttribute("name_2");</pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Значение идентификатора и класса</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.id() и .className()</h4>

                    <p class="paragraph">- прямой путь задавания и получения значения <strong>id</strong> и <strong>class</strong> элемента, минуя <strong>.setAttribute()</strong> и <strong>.getAttribute()</strong></p>
                    <pre class="screen screen_pre">
let name_1 = document.querySelector("css_selector");

name_1.id("value_1");
name_1.className("value_1");    // устарел

console.log(name_1.id)
console.log(name_1.className)</pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Стили элемента</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">inline</h4>

                    <pre class="screen screen_pre">
let name_1 = document.querySelector("css-selector_1");

name_1.style.styleName_1 = "value_1";
name_1.style.cssText = "style-name_1: value_1; style-name_2: value_2; ....";

name_1.style.cssText = `style-name_1: ${....}; ....`;  // с переменными</pre>
                    <pre class="screen screen_pre">
    // для нескольких элементов:

for (let i = 0; i &lt; name_1.length; i++) {
     name_1[i].style.styleName = "value_1";
}

    // используя forEach (если querySelectorAll):

name_1.forEach(item =&gt; {
    item.style.styleName_1 = "value_1";
});</pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Редактирование класса</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.classList.add()</h4>

                    <pre class="screen screen_pre">
let name_1 = document.querySelector('css_selector_1');
name_1.classList.add("class_1");</pre>
                    <p class="paragraph">Если у элемента <strong>element_1</strong> имеются классы, то новый класс добавляется в список последним</p>
                    <pre class="screen screen_post">
    // Открытие окна


let buttonLink = document.querySelector(".button_link");
let popup = document.querySelector(".sale_popup");

buttonLink.addEventListener("click", function(lnkEvent){
    lnkEvent.preventDefault();
    popup.classList.add("sale_popup_show")
});</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.classList.remove()</h4>

                    <pre class="screen screen_pre">
let name_1 = document.querySelector('css_selector_1');
name_1.classList.remove("class_1");</pre>

                    <pre class="screen screen_post">
    // Закрытие окна


let closePopup = document.querySelector(".sale_popup_close");

close.addEventListener("click", function(lnkEvent){
    lnkEvent.preventDefault();
    popup.classList.remove("sale_popup_show");
});</pre>
                </div>
                
                <div class="subsubsection">
                    <h4 class="subsubsection__header">.classList.toggle()</h4>

                    <p class="paragraph">- переключает класс</p>
                    <pre class="screen screen_pre">
let name_1 = document.querySelector('css_selector_1');
name_1.classList.toggle("class_1");   //  меняет
name_1.classList.toggle("class_1");   //  наличие
name_1.classList.toggle("class_1");   //  класса</pre>

                    <pre class="screen screen_pre">
    // переключает по клику


const name_1 = document.querySelector('.name_2');
name_1.addEventListener('click', () => {
    name_1.classList.toggle(.name_3);
});
                    </pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.classList.cotains()</h4>

                    <p class="paragraph">
                        - сообщает, есть ли у элемента класс<br>
                        &bull; Возвращает булево значение
                    </p>
                    <pre class="screen screen_pre">
let name_1 = document.querySelector('css_selector_1');

if (name_1.classList.contains("class_1") == true {
    // action;
}</pre>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">Создание и удаление и клонирование элементов</h3>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.createElement() + .append() //.appendChild() устарел</h4>

                    <pre class="screen screen_pre">
   // Создание нового элемента и присоединение его к родителю последним элементом:


let name_1 = document.createElement('html_element');
let name_2 = document.querySelector('css_selector_1');

name_1.textContent = "text_1";

name_2.append(name_1);</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.createElement() + .prepend()</h4>

                    <pre class="screen screen_pre">
    // Создание нового элемента и присоединение его к родителю первым элементом:


let name_1 = document.createElement('html_element');
let name_2 = document.querySelector('css_selector_1');

name_1.textContent = "text_1";

name_2.prepend(name_1);</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.createElement() + .before()</h4>

                    <pre class="screen screen_pre">
    // Создание нового элемента и присоединение его перед элементом:


let name_1 = document.createElement('html_element');
let name_2 = document.querySelector('css_selector_1');

name_1.textContent = "text_1";

name_2[i].before(name_1);       // i - индекс элемента, перед которым вставляется name_1</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.createElement() + .insertBefore()    // устарел</h4>

                    <pre class="screen screen_pre">
   // Создание нового элемента и присоединение его к родителю, перед элементом name_3:


let name_1 = document.createElement('html_element');
let name_2 = document.querySelector('css_selector_1');
let name_3 = document.querySelector('css_selector_2');

name_1.textContent = "text_1";

name_2.insertBefore(name_1, name_3);</pre>

                    <p class="paragraph">При отсутствии элемента <strong>name_3</strong>, новый элемент присоединяется последним</p>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.createElement() + .after()</h4>

                    <pre class="screen screen_pre">
    // Создание нового элемента и присоединение его перед элементом:


let name_1 = document.createElement('html_element');
let name_2 = document.querySelector('css_selector_1');

name_1.textContent = "text_1";

name_2[i].after(name_1);       // i - индекс элемента, после которого вставляется name_1</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">.remove() .removeChild() и .parentNode.</h4>

                    <pre class="screen screen_pre">
   // Продолжение: Удаление элемента


name_1.remove()                         // удаляет элемент name_1

name_2.removeChild(name_1);             // удаляет элемент name_1 из родительского элемента name_2 (устарел)

name_1.parentNode.removeChild(name_1);  // удаляет элемент name_1 из родительского элемента</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">Замена элемента</h4>

                    <pre class="screen screen_pre">
name_1.replaceWith(name_2);     // name_1 заменяем на name_2

name_3.replaceChild(name_1, name_2);  // (устарел)</pre>
                </div>

                <div class="subsubsection">
                    <h4 class="subsubsection__header">Клонирование элемента</h4>

                    <pre class="screen screen_pre">
   // Клонирование элемента


let name_1 = document.querySelector("css_selector_1");
let name_2_1 = document.querySelector("css_selector_2_1");

let name_2_2 = name_2_1.cloneNode(true);      //  клонирование name_2_1 с потомками
let name_2_3 = name_2_1.cloneNode(false);     //  клонирование name_2_1 без потомков

name_1.appendChild(name_2_2);
name_1.appendChild(name_2_3);</pre>
                </div>
            </div>

            <pre class="screen screen_post">
    // Пример всплывающего окна

&lt;script&gt;

let link = document.querySelector(".login-link");
let popup = document.querySelector(".modal-login");
let close = popup.querySelector(".modal-close");
let form = popup.query.Selector("form");
let login = popup.querySelector("[name=login]");
let password = popup.querySelector("name=password");
let storage = localStorage.getItem("login");

link.addEventListener("click", function(evt){
    evt.preventDefault();
    popup.classList.add("modal-show")
    if (storage) {
        login.value = storage;
        password.focus();
    } else {
        login.focus();
    }
});

close.addEventListener("click", function(evt){
    evt.preventDefault();
    popup.classList.remove("modal-show");
    popup.classList,remove("modal-error");
});

form.addEventListener("submit", function(evt) {
    if(!login.value || !password.value) {
        evt.preventDefault();
        popup.classList.add("modal-error");
    } else {
        localStorage.setItem("login", login.value)
    });

    window.addEventListener("keydown", function(evt) {
        if (evt.keyCode === 27) {
            if (popup.classList.contains("modal-show")) {
            popup.classList.remove("modal-show")
        }
    }
});

&lt;/script&gt;

    // + CSS code:

&lt;style&gt;

@keyframes shake {
0%, 100% { transform: translateX(0); }
10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
20%, 40%, 60%, 80% { transform: translateX(10px); }
}

.modal-error {
animation-name: shake;
animation-duration: 0,6s;
}

&lt;/style&gt;</pre>
        </section>

        <section class="section">
            <h2 class="section__header">Перемещение по DOM</h2>

            <p class="paragraph">
                <strong>firstChild</strong><br>
                <strong>lastChild</strong><br>
                <strong>parentNode</strong><br>
                <strong>children</strong><br>
                <strong>previousSibling</strong><br>
                <strong>nextSibling</strong>
            </p>

            <div class="subsection">
                <h3 class="subsection__header">.firstChild</h3>

                <pre class="screen screen_pre">
    // Проверка наличия потомка


let name_1 = document.querySelector('css-selector_1');

if (name_1.firstChild) {
    // action;
}</pre>
            </div>

            <div class="subsection">
                <h3 class="subsection__header">.сhildren</h3>

                <pre class="screen screen_pre">
    // Обращение ко всем потомкам


let name_1 = document.querySelector('css-selector_1');

for (let i=0; i &lt; name_1.children.length; i++) {
    let name_2 = name_1.children[i];

    document.writeIn(name_2.tagName);
}</pre>
                <p class="paragraph">Для этой коллекции доступны методы <strong>Array</strong></p>
            </div>
        </section>
    </main>
</body>
</html>