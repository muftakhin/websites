<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gulp</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../styles/style.css">
</head>

<body class="page">
    <header class="header">
        <a class="header__button"  href="../../index.html">
            &uArr;
        </a>
        <h1 class="header__title">
            Gulp
        </h1>
    </header>

    <article class="article">
        <section class="section">
            <h2 class="section__header">Установка Gulp</h2>

            <div class="subsection">
                <pre class="screen screen_post">
npm i gulp-cli -g</pre>
                <p class="text">
                    <strong>i</strong> - install (сокращённая запись)<br>
                    <strong>-g</strong> - установка пакета глобально
                </p>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Формирование package.json</h2>

            <div class="subsection">
                <p class="text">
                    &bull; в нём содержится информация о нашем проекте<br>
                    &bull; Чтобы можно было с его помощью в других папках инициализировать наше приложение
                </p>
                <pre class="screen screen_post">
npm init</pre>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Просмотр установленных глобально пакетов</h2>

            <div class="subsection">
                <pre class="screen screen_post">
npm ls -g</pre>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Установка Gulp в папке</h2>

            <div class="subsection">
                <pre class="screen screen_post">
npm i gulp --save-dev</pre>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Вызов Gulp</h2>

            <div class="subsection">
                <p class="text">
                    Находясь в папке проекта вводим команду <strong>gulp</strong>
                </p>

                <pre class="screen screen_post">
gulp</pre>

                <p class="text">
                    Чтобы вызвать <strong>gulp</strong> создаём файл <strong>gulpfile.js</strong>, в котором прописываем:
                </p>
                <pre class="screen screen_post">
const gulp = require('gulp');</pre>
                <p class="text">
                    С помощью команды <strong>require</strong> мы может подключать все пакеты, которые установили с помощью <strong>nmp</strong> в данную папку
                </p>

                <pre class="screen screen_post">
const gulp = require('gulp');

gulp.task('default', function() {
    console.log(1);
});</pre>
                <p class="text">
                    Используем метод <strong>.task</strong> на команду <strong>default</strong> и вешаем сюда функцию с выводом в консоль <strong>1</strong>
                </p>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Установка модулей gulp-less и gulp-sass</h2>

            <div class="subsection">
                <pre class="screen screen_post">
npm install gulp-less</pre>

                <pre class="screen screen_post">
npm install gulp-sass --save-dev</pre>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Компилирование LESS to CSS</h2>

            <div class="subsection">
                <pre class="screen screen_post">
const gulp = require('gulp');
const less = require('gulp-less');

gulp.task('default', function() {
    gulp.src('less/styles.less')
        .pipe(less())
        .pipe(gulp.dest('./css'));
});</pre>
                <p class="text">
                    <strong>var gulp = require('gulp-less');</strong> - подключаем плагин <strong>gulp-less</strong><br>
                    <strong>gulp.src</strong> - получение необходимого файла
                </p>

                <p class="text">
                    Выполняем команду <strong>.pipe(less())</strong> - это метод, который выплоняет одно действие (В данном случае компиляция)<br>
                    и <strong>.pipe(gulp.dest('css')); </strong>(указываю папку <strong>./css</strong>, в качестве папки назначения для скомпилированного файла)
                </p>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Компилирование SASS to CSS</h2>

            <div class="subsection">
                <pre class="screen screen_post">
const gulp = require('gulp');
const less = require('gulp-sass');
                  
gulp.task('sass', function() {
    gulp.src('./project/**/*.scss')
        .pipe(sass())
        .pipe(gulp.dest('./project'));
});</pre>
                <p class="text">
                    <strong>**/*.scss</strong> - ищем все файлы с расширением <strong>.scss</strong>, рассматривая и все вложенные папки, внутри папки <strong>project/</strong>
                </p>

                <p class="text">
                    Чтобы вызвать задачу <strong>sass</strong>, ввожу следующее:
                </p>
                <pre class="screen screen_post">
gulp sass</pre>
            </div>
        </section>

        <section class="section">
            <h2 class="section__header">Отслеживание изменений в файле</h2>

            <div class="subsection">
                <p class="text">
                    Происходит при помощи команды <strong>gulp.watch();</strong>
                </p>
                <pre class="screen screen_post">
const gulp = require('gulp');
const less = require('gulp-less');
                    
gulp.task('default', function() {
    gulp.watch('less/*.less', function(e) {
        gulp.src(e.path)
            .pipe(less())
            .pipe(gulp.dest('css'));
    });
});</pre>
                <p class="text">
                    &bull; - отслеживаем все файлы <strong>.less</strong> в папке <strong>less/</strong><br>
                    &bull; <strong>gulp.src</strong> - получение необходимого файла
                </p>

                <p class="text">
                    Или:
                </p>
                <pre class="screen screen_post">
const gulp = require('gulp');
const less = require('gulp-less');

function styles() {
    return gulp.src('./less/styles.less')
               .pipe(less())
               .pipe(gulp.dest('./css'));
}

function watch() {
    return gulp.watch('./less/**/*.less', styles);
}

gulp.task('css', styles);
gulp.task('watch', watch);</pre>
            </div>
        </section>

        <section class="section">
            <h3 class="section__header">Примеры</h3>

            <div class="subsection">
                <a href="examples/example_1.html"><div class="link">Пример 1</div></a>
                <a href="examples/example_1_1.html"><div class="link">Пример 1.1</div></a>
            </div>
        </section>
    </article>
</body>
</html>
